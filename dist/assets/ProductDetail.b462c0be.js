import{a as s,j as t,r as n,e as x,c as C,n as P,k as p,i as c,l,o as y,P as k,s as F,p as E,q as A}from"./index.31036f5b.js";import{R as B}from"./Rating.d413def9.js";import{u as j}from"./index.00a64885.js";const D=()=>{const m=JSON.parse(localStorage.getItem("SingleProduct"));return s("div",{className:" bg-[#ffa37bd9] py-[3rem]  flex-col items-center hidden  animate-slideup sm:flex",children:[t("h1",{className:"text-center text-white text-[3rem] font-bold mb-10",children:"Galary"}),t("div",{className:"grid  grid-cols-1 sm:grid-cols-2 align-center  gap-x-10 gap-y-10   px-5 sm:px-10 lg:grid-cols-3 xl:gap-x-20  xl:px-20 ",children:m.images.map(d=>t("img",{src:d,className:"w-[380px] h-[250px] rounded-xl object-cover"}))})," "]})},O="/Online-Shopping/assets/FB.013136a4.jpg",T=({prodId:m})=>{const[d,w]=n.exports.useState(""),g=x(e=>e.userReducer),o=x(e=>e.authReducer),a=n.exports.useRef(null),h=x(e=>e.productReducer),b=C(),I=P(),S=e=>{if(e.preventDefault(),o.isAuthenticated===!0){const r=j();console.log("in feedback"),p(c(l,`feedbacks/${r}`),{feedback:d,id:m,name:g.userName,image:g.image,feedNo:h.feedbackNumber}),y(c(l,"feedbacks/"),f=>{const i=f.val();b(k.setProductsFeedback(i))})}else I("/signin");w("")};n.exports.useEffect(()=>{a.current&&(a.current.scrollTop=1e6)});let u=[];return h.singleProductFeedback.length>0&&(u=[...h.singleProductFeedback],u=u.sort((e,r)=>e.feedNo>r.feedNo?1:r.feedNo>e.feedNo?-1:0)),s(n.exports.Fragment,{children:[t("h1",{className:"text-[2rem] font-bold text-[#a75b29] text-center bg-gray-100 pt-10 animate-slideup",children:"FeedBacks"}),s("div",{className:"bg-gray-100 flex justify-center items-start gap-5 xl:gap-20",children:[t("img",{src:O,alt:"",className:"w-[27rem] h-[30rem] lg:w-[30rem] rounded-xl hidden md:block ml-4 mt-14"}),s("div",{className:" flex flex-col items-center py-10 ",children:[t("div",{ref:a,className:"w-[90%] h-[300px]  md:max-w-[500px]  bg-white overflow-scroll my-4 shadow-inner border",children:s("div",{className:" flex flex-col gap-5 w-full my-5 ",children:[u.map(e=>s("div",{className:`flex ${e.name===g.userName&&"flex-row-reverse justify-between "} gap-5 bg-[#fce8da] min-h-[5rem] items-center mx-5   p-5 rounded-lg`,children:[t("img",{src:e.image,alt:"",className:"w-[3rem] h-[3rem] rounded-full"}),s("div",{className:"flex flex-col max-w-[20rem]",children:[t("p",{className:"text-sm text-[#a75b29] font-bold",children:e.name}),t("p",{children:e.feedback})]})]}))," "]})}),s("form",{className:"text-center",children:[t("textarea",{name:"txtArea",id:"txtArea",cols:40,rows:4,value:d,onChange:e=>w(e.target.value),placeholder:"Write your feedback here",className:"p-4 rounded-xl my-4 w-[90%] outline-[#C56E33] border"}),t("button",{type:"submit",className:" hover:bg-[#a75b29] bg-[#C56E33] w-[10rem] rounded-lg  text-white p-2",onClick:S,children:"Submit"})]})]})]})]})},q=()=>{const m=n.exports.useRef(null);n.exports.useState(null);const d=x(e=>e.userReducer),w=x(e=>e.authReducer),g=P(),o=C(),a=JSON.parse(localStorage.getItem("SingleProduct")),h=x(e=>e.productReducer.activeImg),[b,I]=n.exports.useState((a==null?void 0:a.images.length)-1);n.exports.useEffect(()=>{o(k.setDefaultActiveImg()),o(F(!1)),y(c(l,"feedbacks/"),e=>{const r=e.val();o(k.setProductsFeedback(r))})},[]);const S=(e,r)=>{o(k.setActiveImg(e)),I(r)},u=(e,r)=>{if(w.isAuthenticated===!0){const f=j(),i=localStorage.getItem("uid");if(d.cart.length>0){const N=d.cart;for(let v in N[0])if(N[0][v].itemName===e)return p(c(l,`users/${i}/`),{totalNumberOfItem:d.totalCartItems+1}),p(c(l,`users/${i}/cart/${v}`),{itemAmount:N[0][v].itemAmount+1}),y(c(l,`users/${i}`),R=>{const $=R.val();o(A($))});p(c(l,`users/${i}/cart/${f}`),{uid:f,itemName:e,itemImage:a.images[b],itemAmount:1,itemPrice:r})}else p(c(l,`users/${i}/cart/${f}`),{uid:f,itemName:e,itemImage:a.images[b],itemAmount:1,itemPrice:r});y(c(l,`users/${i}`),N=>{const v=N.val();o(A(v))}),p(c(l,`users/${i}/`),{totalNumberOfItem:d.totalCartItems+1})}else g("/signin")};return n.exports.useEffect(()=>{m.current.scrollTop=0}),s("div",{ref:m,children:[s("div",{className:"flex  flex-col justify-center py-16 md:flex-row md:justify-between gap-10  animate-slideup  bg-gray-50  ",children:[s("div",{className:"flex  flex-1 flex-col justify-center items-center md:ml-4",children:[t("img",{src:h,alt:"",className:"w-[90%] h-[250px] sm:w-[500px] sm:h-[400px] object-contain"}),t("div",{className:"flex flex-wrap justify-around mt-2 gap-4 px-5",children:a==null?void 0:a.images.map((e,r)=>s("label",{children:[t("input",{type:"radio",name:"radio",value:r,onChange:()=>S(e,r),className:"radioInput absolute opacity-0 w-0 h-0 cursor-pointer",defaultChecked:!0,checked:r===b}),t("img",{src:e,alt:"",className:"radioImg w-12 h-12 cursor-pointer"},r)]}))})]}),s("div",{className:"flex  flex-1 flex-col  items-center md:items-start mt-10  px-4",children:[t("h1",{className:"text-2xl capitalize font-bold text-center md:text-start",children:a.title}),t("p",{className:"italic text-gray-500 text-center md:text-start mx-4 mt-2",children:a.description}),s("div",{className:"flex flex-col items-center  md:items-start ",children:[t("table",{className:"table-fixed  mt-10 w-[70%] sm:pl-10 sm:w-[50%] md:w-[70%] md:pl-0 ",children:s("tbody",{children:[s("tr",{children:[t("td",{className:"font-bold mr-10",children:"Brand:"}),t("td",{children:a.brand})]}),s("tr",{children:[t("td",{className:"font-bold",children:"Rating:"}),t("td",{children:s("div",{className:"flex justify-start items-center gap-2",children:[t(B,{rating:a.rating,clasName:""}),a.rating]})})]}),s("tr",{children:[t("td",{className:"font-bold",children:"Stock:"}),t("td",{children:a.stock})]}),s("tr",{children:[t("td",{className:"font-bold",children:"Price:"}),s("td",{className:"font-bold",children:["$",a.price]})]}),s("tr",{children:[t("td",{className:"font-bold",children:"Discount:"}),s("td",{children:[a.discountPercentage,"%"]})]})]})}),s("button",{className:"border-none px-5 py-2 hover:bg-[#a75b29] bg-[#C56E33] text-white rounded-lg w-[10rem] mt-6",onClick:()=>u(a.title,a.price),children:["Add To Cart ",t(E,{className:"inline ml-1"})]})]})]})]}),t(D,{}),t(T,{prodName:a.title,prodId:a.id})]})};export{q as default};
